<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendário Letivo  2026 - EEMTI Filgueiras Lima</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <h1>Calendário Letivo 2026 EEMTI Filgueiras Lima- Visualização</h1>

    <div id="totals">
      <h2>Ano Letivo 2026</h2>

      <div class="total-display">
        <div>
          <div class="total-main" id="totalAnoAtual">0</div>
          <div class="total-label">dias letivos de 200</div>
        </div>

        <div class="total-progress">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
          <div class="progress-text" id="progressText">0%</div>
        </div>
      </div>

      <div class="info-cards">
        <div class="info-card" id="inicioAnoLetivo">
          <strong>Início</strong>
          <span>09 de Fevereiro 2026</span>
        </div>
        <div class="info-card" id="fimAnoLetivo">
          <strong>Fim</strong>
          <span>Não definido</span>
        </div>
      </div>
    </div>

    <div id="buttons">
      <div class="button-row">
        <button id="exportPDF">Exportar PDF</button>
        <button id="goToEditor">Acessar Editor (Requer Senha)</button>
      </div>
    </div>

    <div id="yearCalendar"></div>

    <!-- Modal de visualização do mês em tamanho grande -->
    <div id="monthViewModal" class="modal">
      <div
        class="modal-content"
        style="
          width: 90%;
          max-width: 1200px;
          max-height: 90vh;
          overflow-y: auto;
        "
      >
        <span id="closeMonthViewModal" class="close">&times;</span>
        <h2 id="monthViewTitle"></h2>

        <div
          id="monthViewDescription"
          style="
            margin-bottom: 20px;
            padding: 15px;
            background: var(--gray-50);
            border-radius: 8px;
          "
        ></div>

        <div
          id="monthViewGrid"
          style="
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: var(--gray-200);
            padding: 1px;
          "
        >
          <!-- Os dias serão inseridos aqui via JavaScript -->
        </div>

        <div
          style="
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-200);
          "
        >
          <div
            id="monthViewNotes"
            style="font-size: 0.9rem; color: var(--gray-600)"
          ></div>
          <div
            id="monthViewTarget"
            style="font-size: 0.9rem; color: var(--gray-600); margin-top: 10px"
          ></div>
        </div>

        <div class="modal-actions" style="margin-top: 20px">
          <button id="printMonthView">Imprimir Visualização</button>
        </div>
      </div>
    </div>

    <!-- Firebase SDKs (Compat) -->
    <!-- Substitua o conteúdo de FIREBASE_CONFIG no próximo bloco pelo seu config do Firebase (veja o passo a passo). -->
    <script>
      // ---------- CONFIGURE AQUI ----------
      // Troque o objeto abaixo pelo seu FIREBASE_CONFIG fornecido no console do Firebase
      // Como exemplo:
      // const FIREBASE_CONFIG = {
      //   apiKey: "AIzaS...yourApiKey...",
      //   authDomain: "your-project.firebaseapp.com",
      //   projectId: "your-project-id",
      //   storageBucket: "your-project-id.appspot.com",
      //   messagingSenderId: "1234567890",
      //   appId: "1:1234567890:web:abcdef",
      // };
      const FIREBASE_CONFIG = {
        apiKey: "AIzaSyBoJ0fleRy89A5m43Giu-M17qbbTSOYopk",
        authDomain: "calendario-letivo-6c027.firebaseapp.com",
        projectId: "calendario-letivo-6c027",
        storageBucket: "calendario-letivo-6c027.firebasestorage.app",
        messagingSenderId: "953319249148",
        appId: "1:953319249148:web:f35074ab1303131187b379",
      };
      window.FIREBASE_CONFIG = FIREBASE_CONFIG;
    </script>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <!-- Bibliotecas para gerar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script src="script.js"></script>
    <script>
      // Configuração específica para a página de visualização
      document.addEventListener("DOMContentLoaded", async function () {
        // Inicializar Firebase (se configurado)
        if (
          window.FIREBASE_CONFIG &&
          Object.keys(window.FIREBASE_CONFIG).length
        ) {
          initFirebase(); // function injected by script.js
        }

        // Inicializar calendário em modo somente leitura
        editMode = false;
        await initCalendar();

        // Configurar botão para ir ao editor
        document
          .getElementById("goToEditor")
          .addEventListener("click", function () {
            window.location.href = "editor.html";
          });

        // Configurar botão de exportar PDF
        document
          .getElementById("exportPDF")
          .addEventListener("click", function () {
            generatePDF();
          });

        // Configurar botão de imprimir visualização do mês
        document
          .getElementById("printMonthView")
          .addEventListener("click", function () {
            window.print();
          });

        // Fechar modal ao clicar fora
        window.addEventListener("click", function (event) {
          const monthViewModal = document.getElementById("monthViewModal");
          if (event.target === monthViewModal) {
            monthViewModal.style.display = "none";
          }
        });

        // Fechar modal com botão X
        document
          .getElementById("closeMonthViewModal")
          .addEventListener("click", function () {
            document.getElementById("monthViewModal").style.display = "none";
          });
      });
    </script>
  </body>
</html>



